# frp 功能目标
给无法暴露外部网络访问端口，但可以以客户端的身份访问外部网络的网络域提供服务代理

# frp 模块简介
## frp 服务端
工作在能够被直接访问的中转服务
- frp控制信令服务器
- frp流量代理服务器

## frp 客户端
工作在需要被代理的网络域
- frp跨域代理连接
- frp本地流量代理连接

# frp 工作流程简介
- 外网frp信令服务器(1.1.1.1)工作在端口23333上，给其分配可用的代理端口范围 30000-32000，设置授权信息
- 目标服务 192.168.1.8:8080需要被代理，启用frp客户端连接，绑定本地代理信息192.168.1.8:8080，初始化会话id信息
- 持续连接外网frp信令服务器(1.1.1.1:23333)，请求建立会话
- 信令服务器收到建立会话请求，缓存命中，分配代理端口，创建端口代理与该会话绑定，返回代理端口，启动会话缓存超时检查(10s)
- 信令服务器等待端口代理连接，通过会话连接发送建立代理连接命令至客户端，在会话连接和端口连接上进行流量代理
- 客户端会话连接收到代理连接命令，主动连接192.168.1.8:8080，在会话连接与新连接上进行流量代理，此时代理完成
- 客户端创建新的会话连接，使用原会话id建立会话请求
- 服务端获取到新的会话连接后，才继续调用accept
